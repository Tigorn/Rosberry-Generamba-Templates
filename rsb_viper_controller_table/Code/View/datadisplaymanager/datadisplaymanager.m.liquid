{% include 'header' %}

#import "{{ prefix }}{{ module_info.name }}DataDisplayManager.h"
#import "{{ prefix }}{{ module_info.name }}ViewOutput.h"

#import <RSBTableViewManager/RSBTableViewManager.h>
#import <RSBTableViewManager/RSBTableViewSectionItem.h>
#import "{{ prefix }}{{ module_info.name }}BaseTableViewCellItem.h"

@interface {{ prefix }}{{ module_info.name }}DataDisplayManager ()

@property (nonatomic) RSBTableViewManager *tableViewManager;

@end

@implementation {{ prefix }}{{ module_info.name }}DataDisplayManager

- (void)displayData:(NSArray *)data inTableView:(UITableView *)tableView {
    if (!self.tableViewManager) {
        self.tableViewManager = [[RSBTableViewManager alloc] initWithTableView:tableView];
    }
    
    NSMutableArray *cellItems = [NSMutableArray array];
    for (id object in data) {
        {{ prefix }}{{ module_info.name }}BaseTableViewCellItem *cellItem = [[{{ prefix }}{{ module_info.name }}BaseTableViewCellItem alloc] init];
        [cellItem setItemDidSelectBlock:^(__weak UITableView *tableView, NSIndexPath *indexPath) {
            [tableView deselectRowAtIndexPath:indexPath animated:YES];
            // handle did select here
        }];
        [cellItems addObject:cellItem];
    }
    
    RSBTableViewSectionItem *sectionItem = [[RSBTableViewSectionItem alloc] initWithCellItems:[NSArray arrayWithArray:cellItems]];
    [self.tableViewManager setSectionItems:@[sectionItem]];
}

@end
